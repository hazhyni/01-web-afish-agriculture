---
import contentData from "../data/content.json";

const { currentCategory, currentSlug } = Astro.props;
const relatedArticles = contentData.articles
  .filter(article => article.category === currentCategory && article.slug !== currentSlug)
  .slice(0, 3);
---

{relatedArticles.length > 0 && (
  <section style="padding:60px 24px; background:linear-gradient(135deg, #2d4a0a 0%, #1a2e05 100%)">
    <div style="max-width:1200px; margin:0 auto">
      <h2 style="text-align:center; color:#f7fee7; font-size:32px; font-weight:800; margin-bottom:40px">
        Artikel Terkait
      </h2>
      
      <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:24px">
        {relatedArticles.map((article) => (
          <article style="background:rgba(249,115,22,0.08); border:1px solid rgba(249,115,22,0.15); border-radius:16px; overflow:hidden; transition:all 0.3s">
            <div style="position:relative; height:160px; overflow:hidden">
              <img 
                src={article.thumbnail} 
                alt={article.title}
                style="width:100%; height:100%; object-fit:cover"
              />
              <div style="position:absolute; top:12px; right:12px; background:#f97316; color:white; padding:4px 10px; border-radius:12px; font-size:0.75rem; font-weight:600; text-transform:capitalize">
                {article.category}
              </div>
            </div>
            
            <div style="padding:20px">
              <div style="color:#a3a3a3; font-size:0.8rem; margin-bottom:8px">
                {new Date(article.published_at).toLocaleDateString('id-ID')} â€¢ {article.author}
              </div>
              
              <h3 style="color:#f7fee7; font-size:1.1rem; font-weight:700; margin-bottom:12px; line-height:1.4">
                {article.title}
              </h3>
              
              <p style="color:#d9f99d; font-size:0.9rem; line-height:1.5; margin-bottom:16px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden">
                {article.excerpt}
              </p>
              
              <a 
                href={`/artikel/${article.slug}`}
                style="background:#f97316; color:white; padding:8px 16px; border-radius:8px; text-decoration:none; font-size:0.9rem; font-weight:600; display:inline-block; transition:all 0.3s"
                onmouseover="this.style.background='#ea580c'"
                onmouseout="this.style.background='#f97316'"
              >
                Baca Artikel
              </a>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>
)}

<style>
  @media (max-width: 768px) {
    section {
      padding: 40px 16px !important;
    }
    section > div > div {
      grid-template-columns: 1fr !important;
    }
  }
</style>