---
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";
import ArticleContent from "../../components/ArticleContent.astro";
import ArticleNavigation from "../../components/ArticleNavigation.astro";
import RelatedArticles from "../../components/RelatedArticles.astro";
import contentData from "../../data/content.json";

export function getStaticPaths() {
  return contentData.articles.map((article) => ({
    params: { slug: article.slug },
    props: { article },
  }));
}

const { article } = Astro.props;
---

<Layout title={`${article.title} - AgriSupply Insight`}>
  <style is:global>
    :root {
      --ink: #1a2e05;
      --brand: #f97316;
      --secondary: #eab308;
      --accent: #16a34a;
    }
    body {
      background: linear-gradient(135deg, #0f1a02 0%, #1a2e05 100%);
      color: #f7fee7;
      font-family: Inter, ui-sans-serif, system-ui;
    }
  </style>

  <!-- Navigation -->
  <nav style="position:sticky; top:0; z-index:50; background:rgba(15,26,2,0.9); backdrop-filter:blur(8px); border-bottom:1px solid rgba(249,115,22,0.2)">
    <div style="max-width:1200px; margin:0 auto; padding:16px 24px; display:flex; justify-content:space-between; align-items:center">
      <a href="/" style="color:#d9f99d; text-decoration:none; font-size:18px; font-weight:700">AGRISUPPLY</a>
      <div style="display:flex; gap:24px; align-items:center">
        <a href="/insight" style="color:#d9f99d; text-decoration:none; font-size:14px">‚Üê Kembali ke Insight</a>
      </div>
    </div>
  </nav>

  <!-- Article Header -->
  <header style="padding:60px 24px 40px; background:linear-gradient(135deg, #1a2e05 0%, #2d4a0a 100%)">
    <div style="max-width:800px; margin:0 auto; text-align:center">
      <div style="color:#eab308; font-size:12px; font-weight:600; text-transform:uppercase; letter-spacing:0.15em; margin-bottom:16px">
        {article.category}
      </div>
      <h1 style="font-size:clamp(28px, 5vw, 48px); font-weight:800; color:#f7fee7; line-height:1.2; margin-bottom:24px">
        {article.title}
      </h1>
      <div style="display:flex; justify-content:center; gap:24px; color:#a3a3a3; font-size:14px; margin-bottom:20px">
        <span>üë®üåæ {article.author}</span>
        <span>üìÖ {new Date(article.published_at).toLocaleDateString('id-ID')}</span>
        <span>‚è±Ô∏è 5 menit baca</span>
      </div>
      <p style="color:#d9f99d; font-size:18px; line-height:1.6; max-width:600px; margin:0 auto">
        {article.excerpt}
      </p>
    </div>
  </header>

  <!-- Article Content (Island) -->
  <ArticleContent article={article} />

  <!-- Article Navigation (Island) -->
  <ArticleNavigation currentSlug={article.slug} />

  <!-- Related Articles (Island) -->
  <RelatedArticles currentCategory={article.category} currentSlug={article.slug} />

  <Footer />
</Layout>